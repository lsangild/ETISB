% !TEX root = ../../main.tex
% !TEX spellcheck = en_GB

\section{Test}
\label{sec:test}
In this section an short introduction to how this project has used test from beginning to the end will be described.
\subsection{Frequency determination resolution}
\begin{table}
	\fxnote{better description or table view, i dont get it atm.}
	\centering
	\begin{tabular}{c | c c c c c | c}
		\toprule
		Test freq (Hz) & \multicolumn{4}{l}{Matlab freq (Hz)} & & CC freq (Hz) \\
		\midrule
		\num{245} & \num{245.13} & \num{244.93} & \num{244.85} & \num{245.03} && \num{237}\\
		\num{350} & \num{349.90} & \num{349.94} & \num{349.88} & \num{349.96} && \num{349}\\
		\num{470} & \num{470.00} & \num{470.00} & \num{470.00} & \num{470.00} && \num{470} \\
		\num{521} & \num{521.22} & \num{521.18} & \num{521.10} & \num{521.04} && \num{525} \\
		\bottomrule
	\end{tabular}
	\caption{Tested frequencies and the found results using blocks of length \num{512}. Matlab results are the average of 4 blocks of \num{512} on a signal of length \num{2048}, each block windowed with a hamming window.}
	\label{tab:test}
\end{table}

\subsection{Clock cycle usage}
A question to be asked is "Can the processing of the signal occur before the next set of 512 samples?".
To find the answer to this question, the clock cycles used of the FFT an the hilbert transform has been measured, and the amount of time of disposal has been calculated.

Time between sample blocks: 
$td = \frac{samples}{fs} = \frac{512}{\SI{48}{\kilo\hertz}} = \SI{10.7}{\milli\second}$.

Measurement of the clock cycles usage: 
\num{1898733} cycles.

The Blackfin has a maximum clock speed of \SI{600}{\mega\hertz}.
Which means it will take $\frac{\num{1898733}}{\SI{600}{\mega\hertz}} = {\SI{3.28}{\milli\second}}$ so the Hilbert transformation should not take more time than it has at its disposal.\fxnote{Needs better explanation}


\fxnote{245Hz, fs=48kHz = 183 samples pr. periode, uden optimering resultat 26225/183 = 143.3.. med 100 optimering(speed) 21082/183 = 115,2... hilbert: 1819687/512 = 3554... med optimering 50(speed/size): same for sinegenerator 21084, hilbert = 1831492/512 = 3577.... optimering0(size): sinegen 21085.. hilbert = 1833887/512 = 3582 }

\FloatBarrier